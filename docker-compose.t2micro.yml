version: "3.8"

# Override pour t2.micro (1GB RAM)
# Utiliser avec: docker compose -f docker-compose.yml -f docker-compose.t2micro.yml up -d

services:
  neo4j:
    environment:
      # Réduire drastiquement la mémoire Neo4j
      - NEO4J_dbms_memory_heap_initial__size=128m
      - NEO4J_dbms_memory_heap_max__size=256m
      - NEO4J_dbms_memory_pagecache_size=64m
    mem_limit: 400m
    memswap_limit: 400m

  backend:
    mem_limit: 300m
    memswap_limit: 300m

  frontend:
    mem_limit: 150m
    memswap_limit: 150m

  nginx-proxy-manager:
    mem_limit: 150m
    memswap_limit: 150m
